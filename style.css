/* ================================================
   THE UPSIDE PROTOCOL — style.css  (v2)
   ================================================ */

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --red:        #ff2222;
  --red-dim:    #cc0000;
  --red-dark:   #880000;
  --bg:         #000000;
  --bg-panel:   #0a0a0a;
  --border:     #3a0000;
  --glow:       0 0 6px #ff2222, 0 0 14px #ff2222, 0 0 30px #cc0000;
  --glow-soft:  0 0 4px #ff2222, 0 0 10px #cc0000;
  --font:       'Courier New', Courier, monospace;
}

html, body { height: 100%; }

body {
  background-color: var(--bg);
  color: var(--red);
  font-family: var(--font);
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 80px 20px 40px;
  overflow-x: hidden;
}

/* Scanline */
body::after {
  content: '';
  position: fixed;
  inset: 0;
  pointer-events: none;
  background: repeating-linear-gradient(
    to bottom,
    transparent 0px, transparent 3px,
    rgba(0,0,0,.06) 3px, rgba(0,0,0,.06) 4px
  );
  z-index: 9998;
}

/* ── Timer ──────────────────────────────────── */
#timer {
  position: fixed;
  top: 16px; right: 20px;
  font-family: var(--font);
  font-size: 1.1rem;
  color: var(--red);
  text-shadow: var(--glow-soft);
  background: var(--bg-panel);
  border: 1px solid var(--border);
  padding: 6px 14px;
  letter-spacing: 2px;
  z-index: 999;
  user-select: none;
}
#timer.warning {
  color: #ff5500;
  text-shadow: 0 0 6px #ff5500, 0 0 18px #ff3300;
  animation: timerPulse .8s infinite;
}
@keyframes timerPulse {
  0%,100%{ opacity:1; } 50%{ opacity:.45; }
}

/* ── Layout ─────────────────────────────────── */
.container {
  width: 100%;
  max-width: 660px;
  text-align: center;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 22px;
}

/* ── Typography ─────────────────────────────── */
h1 {
  font-size: clamp(1.6rem, 5vw, 2.6rem);
  letter-spacing: 4px;
  text-transform: uppercase;
  text-shadow: var(--glow);
  line-height: 1.25;
}
h2 {
  font-size: clamp(1rem, 3vw, 1.5rem);
  letter-spacing: 3px;
  text-transform: uppercase;
  text-shadow: var(--glow-soft);
}
p {
  font-size: .95rem;
  line-height: 1.7;
  color: #cc3333;
  letter-spacing: 1px;
}
.stage-label {
  font-size: .75rem;
  letter-spacing: 4px;
  color: var(--red-dark);
  text-transform: uppercase;
  margin-bottom: -10px;
}
.divider {
  width: 100%;
  border: none;
  border-top: 1px solid var(--border);
}

/* ── Puzzle display ─────────────────────────── */
.puzzle-display {
  font-size: clamp(1rem, 3.5vw, 1.5rem);
  letter-spacing: 5px;
  text-shadow: var(--glow);
  border: 1px solid var(--border);
  background: var(--bg-panel);
  padding: 18px 28px;
  width: 100%;
  word-break: break-all;
  line-height: 1.9;
}
.clue {
  font-size: .85rem;
  color: #994444;
  letter-spacing: 2px;
  font-style: italic;
  border-left: 2px solid var(--red-dark);
  padding-left: 14px;
  text-align: left;
  width: 100%;
}

/* ── Input ──────────────────────────────────── */
.input-group { display:flex; flex-direction:column; gap:12px; width:100%; }

input[type="text"] {
  background: var(--bg-panel);
  border: 1px solid var(--red-dark);
  color: var(--red);
  font-family: var(--font);
  font-size: 1rem;
  letter-spacing: 3px;
  padding: 12px 16px;
  text-transform: uppercase;
  width: 100%;
  outline: none;
  transition: border-color .2s, box-shadow .2s;
}
input[type="text"]::placeholder { color:#551111; text-transform:uppercase; letter-spacing:2px; }
input[type="text"]:focus        { border-color:var(--red); box-shadow:0 0 8px var(--red-dark); }

/* ── Buttons ────────────────────────────────── */
button, .btn {
  background: transparent;
  border: 1px solid var(--red);
  color: var(--red);
  font-family: var(--font);
  font-size: .95rem;
  letter-spacing: 4px;
  text-transform: uppercase;
  padding: 12px 32px;
  cursor: pointer;
  transition: background .2s, box-shadow .2s, color .2s;
  text-decoration: none;
  display: inline-block;
}
button:hover, .btn:hover {
  background: var(--red-dark);
  color: #fff;
  box-shadow: 0 0 10px var(--red), 0 0 24px var(--red-dark);
}
button:active, .btn:active { background:var(--red); color:#000; }

/* ── Feedback messages ──────────────────────── */
.msg { font-size:.85rem; letter-spacing:2px; min-height:22px; text-align:center; }
.msg.error   { color:#ff4444; text-shadow:0 0 6px #ff0000; }
.msg.success { color:#44ff44; text-shadow:0 0 6px #00ff00; }

/* ── Story animation (index.html) ───────────── */
.story-container {
  width: 100%;
  display: flex;
  flex-direction: column;
  gap: 10px;
}
.story-line {
  opacity: 0;
  transition: opacity .8s ease;
  color: #cc3333;
  font-size: .95rem;
  letter-spacing: 1.5px;
  line-height: 1.8;
  text-align: center;
}
.story-line.visible { opacity: 1; }

/* ── Dashboard step list ────────────────────── */
.step-list {
  width: 100%;
  display: flex;
  flex-direction: column;
  gap: 8px;
}
.step-row {
  display: flex;
  align-items: center;
  gap: 14px;
  padding: 10px 16px;
  border: 1px solid #1e0000;
  background: #050505;
  font-family: var(--font);
  font-size: .88rem;
  letter-spacing: 2px;
  color: #7a2222;
  transition: border-color .3s, color .3s;
}
.step-row.done        { border-color: #3a0000; color: #cc3333; }
.step-row.done .checkbox { color: #44ff44; text-shadow: 0 0 6px #00ff00; }
.checkbox   { font-family:var(--font); min-width:28px; text-align:center; letter-spacing:0; }
.step-label { flex:1; }

.action-row {
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 14px;
  margin-top: 4px;
}
.mission-done-msg { font-size:1rem; letter-spacing:2px; margin-top:6px; }

/* ── Physical / note blocks ─────────────────── */
.physical-note {
  width: 100%;
  border: 1px solid #330000;
  background: #080808;
  padding: 18px 22px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  text-align: left;
}
.physical-note p { font-size:.9rem; color:#cc4444; letter-spacing:2px; }
.physical-note p:first-child { color:#44ff44; text-shadow:0 0 6px #00ff00; font-size:.95rem; }

/* ── Access-granted header (breach.html) ────── */
.access-granted-header {
  border: 1px solid #004400;
  background: #001200;
  padding: 16px 24px;
  width: 100%;
  text-align: center;
}
.access-granted-header h2 {
  color: #44ff44;
  text-shadow: 0 0 8px #00ff00, 0 0 20px #00aa00;
  letter-spacing: 4px;
}
.access-granted-header p { color:#336633; font-size:.85rem; letter-spacing:2px; margin-top:4px; }

/* ── Breach animation ───────────────────────── */
.breach-output {
  width: 100%;
  display: flex;
  flex-direction: column;
  gap: 10px;
  min-height: 20px;
}
.breach-line {
  opacity: 0;
  transition: opacity .6s ease;
  color: #ffaa00;
  text-shadow: 0 0 6px #ff8800;
  font-size: .95rem;
  letter-spacing: 3px;
  text-align: center;
}
.breach-line.visible { opacity: 1; }

/* ── Final success block ────────────────────── */
.final-success {
  display: none;
  flex-direction: column;
  gap: 14px;
  border: 1px solid #00ff00;
  padding: 24px 32px;
  background: #000a00;
  width: 100%;
}
.final-success p {
  color: #44ff44;
  text-shadow: 0 0 6px #00ff00, 0 0 14px #00aa00;
  letter-spacing: 3px;
  text-align: center;
  font-size: 1.1rem;
}

/* ── Fail page ──────────────────────────────── */
.fail-container {
  text-align: center;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 24px;
}
.fail-container h1 {
  font-size: clamp(2rem, 8vw, 4rem);
  color: var(--red);
  text-shadow: 0 0 10px #ff0000, 0 0 30px #cc0000, 0 0 60px #880000;
  letter-spacing: 6px;
  animation: failFlicker 2s infinite;
}
.fail-container p { font-size:1.1rem; color:#cc2222; letter-spacing:3px; }

@keyframes failFlicker {
  0%,92%,100%{ opacity:1; } 93%{ opacity:.3; } 95%{ opacity:1; } 97%{ opacity:.2; } 99%{ opacity:1; }
}
